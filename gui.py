# This file was generated by the Tkinter Designer by Parth Jadhav
# https://github.com/ParthJadhav/Tkinter-Designer


from pathlib import Path
import subprocess
import gui2
# from tkinter import *
# Explicit imports to satisfy Flake8
from tkinter import Tk, Canvas, Entry, Text, Button, PhotoImage

OUTPUT_PATH = Path(__file__).parent
ASSETS_PATH = OUTPUT_PATH / Path(r".\res\frame0")


def relative_to_assets(path: str) -> Path:
    return ASSETS_PATH / Path(path)


def run(window, accessToken, clientId, uuid, nickname):
    window.destroy()
    print("Проверка обновлений и целостности файлов")
    subprocess.call('.\\git\\bin\\git.exe checkout -- .')
    subprocess.call('.\\git\\bin\\git.exe clean -fd')
    subprocess.call('.\\git\\bin\\git.exe pull --ff-only')
    print("Запуск игры...")
    subprocess.call(
        f'''.\\java\\bin\\java.exe "-javaagent:authlib-injector-1.2.3.jar=https://crossmine.ddns.net/" "-XX:HeapDumpPath=MojangTricksIntelDriversForPerformance_javaw.exe_minecraft.exe.heapdump" "-Dos.name=Windows 10" "-Dos.version=10.0" -Djava.library.path=".\\versions\\1.19.2\\natives" -Dminecraft.launcher.brand=EMCLauncher -Dminecraft.launcher.version=1.0 -cp ".\\libraries\\cpw\\mods\\securejarhandler\\2.1.4\\securejarhandler-2.1.4.jar";".\\libraries\\org\\ow2\\asm\\asm\\9.3\\asm-9.3.jar";".\\libraries\\org\\ow2\\asm\\asm-commons\\9.3\\asm-commons-9.3.jar";".\\libraries\\org\\ow2\\asm\\asm-tree\\9.3\\asm-tree-9.3.jar";".\\libraries\\org\\ow2\\asm\\asm-util\\9.3\\asm-util-9.3.jar";".\\libraries\\org\\ow2\\asm\\asm-analysis\\9.3\\asm-analysis-9.3.jar";".\\libraries\\net\\minecraftforge\\accesstransformers\\8.0.4\\accesstransformers-8.0.4.jar";".\\libraries\\org\\antlr\\antlr4-runtime\\4.9.1\\antlr4-runtime-4.9.1.jar";".\\libraries\\net\\minecraftforge\\eventbus\\6.0.3\\eventbus-6.0.3.jar";".\\libraries\\net\\minecraftforge\\forgespi\\6.0.0\\forgespi-6.0.0.jar";".\\libraries\\net\\minecraftforge\\coremods\\5.0.1\\coremods-5.0.1.jar";".\\libraries\\cpw\\mods\\modlauncher\\10.0.8\\modlauncher-10.0.8.jar";".\\libraries\\net\\minecraftforge\\unsafe\\0.2.0\\unsafe-0.2.0.jar";".\\libraries\\com\\electronwill\\night-config\\core\\3.6.4\\core-3.6.4.jar";".\\libraries\\com\\electronwill\\night-config\\toml\\3.6.4\\toml-3.6.4.jar";".\\libraries\\org\\apache\\maven\\maven-artifact\\3.8.5\\maven-artifact-3.8.5.jar";".\\libraries\\net\\jodah\\typetools\\0.8.3\\typetools-0.8.3.jar";".\\libraries\\net\\minecrell\\terminalconsoleappender\\1.2.0\\terminalconsoleappender-1.2.0.jar";".\\libraries\\org\\jline\\jline-reader\\3.12.1\\jline-reader-3.12.1.jar";".\\libraries\\org\\jline\\jline-terminal\\3.12.1\\jline-terminal-3.12.1.jar";".\\libraries\\org\\spongepowered\\mixin\\0.8.5\\mixin-0.8.5.jar";".\\libraries\\org\\openjdk\\nashorn\\nashorn-core\\15.3\\nashorn-core-15.3.jar";".\\libraries\\net\\minecraftforge\\JarJarSelector\\0.3.16\\JarJarSelector-0.3.16.jar";".\\libraries\\net\\minecraftforge\\JarJarMetadata\\0.3.16\\JarJarMetadata-0.3.16.jar";".\\libraries\\cpw\\mods\\bootstraplauncher\\1.1.2\\bootstraplauncher-1.1.2.jar";".\\libraries\\net\\minecraftforge\\JarJarFileSystems\\0.3.16\\JarJarFileSystems-0.3.16.jar";".\\libraries\\net\\minecraftforge\\fmlloader\\1.19.2-43.2.0\\fmlloader-1.19.2-43.2.0.jar";".\\libraries\\com\\mojang\\logging\\1.0.0\\logging-1.0.0.jar";".\\libraries\\com\\mojang\\blocklist\\1.0.10\\blocklist-1.0.10.jar";".\\libraries\\com\\mojang\\patchy\\2.2.10\\patchy-2.2.10.jar";".\\libraries\\com\\github\\oshi\\oshi-core\\5.8.5\\oshi-core-5.8.5.jar";".\\libraries\\net\\java\\dev\\jna\\jna\\5.10.0\\jna-5.10.0.jar";".\\libraries\\net\\java\\dev\\jna\\jna-platform\\5.10.0\\jna-platform-5.10.0.jar";".\\libraries\\org\\slf4j\\slf4j-api\\1.8.0-beta4\\slf4j-api-1.8.0-beta4.jar";".\\libraries\\org\\apache\\logging\\log4j\\log4j-slf4j18-impl\\2.17.0\\log4j-slf4j18-impl-2.17.0.jar";".\\libraries\\com\\ibm\\icu\\icu4j\\70.1\\icu4j-70.1.jar";".\\libraries\\com\\mojang\\javabridge\\1.2.24\\javabridge-1.2.24.jar";".\\libraries\\net\\sf\\jopt-simple\\jopt-simple\\5.0.4\\jopt-simple-5.0.4.jar";".\\libraries\\io\\netty\\netty-common\\4.1.77.Final\\netty-common-4.1.77.Final.jar";".\\libraries\\io\\netty\\netty-buffer\\4.1.77.Final\\netty-buffer-4.1.77.Final.jar";".\\libraries\\io\\netty\\netty-codec\\4.1.77.Final\\netty-codec-4.1.77.Final.jar";".\\libraries\\io\\netty\\netty-handler\\4.1.77.Final\\netty-handler-4.1.77.Final.jar";".\\libraries\\io\\netty\\netty-resolver\\4.1.77.Final\\netty-resolver-4.1.77.Final.jar";".\\libraries\\io\\netty\\netty-transport\\4.1.77.Final\\netty-transport-4.1.77.Final.jar";".\\libraries\\io\\netty\\netty-transport-native-unix-common\\4.1.77.Final\\netty-transport-native-unix-common-4.1.77.Final.jar";".\\libraries\\io\\netty\\netty-transport-classes-epoll\\4.1.77.Final\\netty-transport-classes-epoll-4.1.77.Final.jar";".\\libraries\\com\\google\\guava\\failureaccess\\1.0.1\\failureaccess-1.0.1.jar";".\\libraries\\com\\google\\guava\\guava\\31.0.1-jre\\guava-31.0.1-jre.jar";".\\libraries\\org\\apache\\commons\\commons-lang3\\3.12.0\\commons-lang3-3.12.0.jar";".\\libraries\\commons-io\\commons-io\\2.11.0\\commons-io-2.11.0.jar";".\\libraries\\commons-codec\\commons-codec\\1.15\\commons-codec-1.15.jar";".\\libraries\\com\\mojang\\brigadier\\1.0.18\\brigadier-1.0.18.jar";".\\libraries\\com\\mojang\\datafixerupper\\5.0.28\\datafixerupper-5.0.28.jar";".\\libraries\\com\\google\\code\\gson\\gson\\2.8.9\\gson-2.8.9.jar";".\\libraries\\com\\mojang\\authlib\\3.11.49\\authlib-3.11.49.jar";".\\libraries\\org\\apache\\commons\\commons-compress\\1.21\\commons-compress-1.21.jar";".\\libraries\\org\\apache\\httpcomponents\\httpclient\\4.5.13\\httpclient-4.5.13.jar";".\\libraries\\commons-logging\\commons-logging\\1.2\\commons-logging-1.2.jar";".\\libraries\\org\\apache\\httpcomponents\\httpcore\\4.4.14\\httpcore-4.4.14.jar";".\\libraries\\it\\unimi\\dsi\\fastutil\\8.5.6\\fastutil-8.5.6.jar";".\\libraries\\org\\apache\\logging\\log4j\\log4j-api\\2.17.0\\log4j-api-2.17.0.jar";".\\libraries\\org\\apache\\logging\\log4j\\log4j-core\\2.17.0\\log4j-core-2.17.0.jar";".\\libraries\\org\\lwjgl\\lwjgl\\3.3.1\\lwjgl-3.3.1.jar";".\\libraries\\org\\lwjgl\\lwjgl\\3.3.1\\lwjgl-3.3.1-natives-windows.jar";".\\libraries\\org\\lwjgl\\lwjgl\\3.3.1\\lwjgl-3.3.1-natives-windows-x86.jar";".\\libraries\\org\\lwjgl\\lwjgl-jemalloc\\3.3.1\\lwjgl-jemalloc-3.3.1.jar";".\\libraries\\org\\lwjgl\\lwjgl-jemalloc\\3.3.1\\lwjgl-jemalloc-3.3.1-natives-windows.jar";".\\libraries\\org\\lwjgl\\lwjgl-jemalloc\\3.3.1\\lwjgl-jemalloc-3.3.1-natives-windows-x86.jar";".\\libraries\\org\\lwjgl\\lwjgl-openal\\3.3.1\\lwjgl-openal-3.3.1.jar";".\\libraries\\org\\lwjgl\\lwjgl-openal\\3.3.1\\lwjgl-openal-3.3.1-natives-windows.jar";".\\libraries\\org\\lwjgl\\lwjgl-openal\\3.3.1\\lwjgl-openal-3.3.1-natives-windows-x86.jar";".\\libraries\\org\\lwjgl\\lwjgl-opengl\\3.3.1\\lwjgl-opengl-3.3.1.jar";".\\libraries\\org\\lwjgl\\lwjgl-opengl\\3.3.1\\lwjgl-opengl-3.3.1-natives-windows.jar";".\\libraries\\org\\lwjgl\\lwjgl-opengl\\3.3.1\\lwjgl-opengl-3.3.1-natives-windows-x86.jar";".\\libraries\\org\\lwjgl\\lwjgl-glfw\\3.3.1\\lwjgl-glfw-3.3.1.jar";".\\libraries\\org\\lwjgl\\lwjgl-glfw\\3.3.1\\lwjgl-glfw-3.3.1-natives-windows.jar";".\\libraries\\org\\lwjgl\\lwjgl-glfw\\3.3.1\\lwjgl-glfw-3.3.1-natives-windows-x86.jar";".\\libraries\\org\\lwjgl\\lwjgl-stb\\3.3.1\\lwjgl-stb-3.3.1.jar";".\\libraries\\org\\lwjgl\\lwjgl-stb\\3.3.1\\lwjgl-stb-3.3.1-natives-windows.jar";".\\libraries\\org\\lwjgl\\lwjgl-stb\\3.3.1\\lwjgl-stb-3.3.1-natives-windows-x86.jar";".\\libraries\\org\\lwjgl\\lwjgl-tinyfd\\3.3.1\\lwjgl-tinyfd-3.3.1.jar";".\\libraries\\org\\lwjgl\\lwjgl-tinyfd\\3.3.1\\lwjgl-tinyfd-3.3.1-natives-windows.jar";".\\libraries\\org\\lwjgl\\lwjgl-tinyfd\\3.3.1\\lwjgl-tinyfd-3.3.1-natives-windows-x86.jar";".\\libraries\\com\\mojang\\text2speech\\1.16.7\\text2speech-1.16.7.jar";".\\libraries\\org\\lwjgl\\lwjgl-glfw\\3.3.1\\lwjgl-glfw-3.3.1-natives-windows-arm64.jar";".\\libraries\\org\\lwjgl\\lwjgl-jemalloc\\3.3.1\\lwjgl-jemalloc-3.3.1-natives-windows-arm64.jar";".\\libraries\\org\\lwjgl\\lwjgl-openal\\3.3.1\\lwjgl-openal-3.3.1-natives-windows-arm64.jar";".\\libraries\\org\\lwjgl\\lwjgl-opengl\\3.3.1\\lwjgl-opengl-3.3.1-natives-windows-arm64.jar";".\\libraries\\org\\lwjgl\\lwjgl-stb\\3.3.1\\lwjgl-stb-3.3.1-natives-windows-arm64.jar";".\\libraries\\org\\lwjgl\\lwjgl-tinyfd\\3.3.1\\lwjgl-tinyfd-3.3.1-natives-windows-arm64.jar";".\\libraries\\org\\lwjgl\\lwjgl\\3.3.1\\lwjgl-3.3.1-natives-windows-arm64.jar";".\\versions\\1.19.2\\1.19.2.jar" -Xmx2G -Xms2G -Dminecraft.applet.TargetDirectory="." -Dlog4j.configurationFile="C:\\Users\\nit\\AppData\\Roaming\\easymc-launcher\\minecraft\\assets\\objects\\bd\\client-1.12.xml" -Dfml.ignorePatchDiscrepancies=true -Dfml.ignoreInvalidMinecraftCertificates=true -XX:HeapDumpPath=MojangTricksIntelDriversForPerformance_javaw.exe_minecraft.exe.heapdump -Djava.net.preferIPv6Addresses=system -DignoreList=bootstraplauncher,securejarhandler,asm-commons,asm-util,asm-analysis,asm-tree,asm,JarJarFileSystems,client-extra,fmlcore,javafmllanguage,lowcodelanguage,mclanguage,forge-,1.19.2.jar -DmergeModules=jna-5.10.0.jar,jna-platform-5.10.0.jar -DlibraryDirectory=".\\libraries" -p .\\libraries/cpw/mods/bootstraplauncher/1.1.2/bootstraplauncher-1.1.2.jar;.\\libraries/cpw/mods/securejarhandler/2.1.4/securejarhandler-2.1.4.jar;.\\libraries/org/ow2/asm/asm-commons/9.3/asm-commons-9.3.jar;.\\libraries/org/ow2/asm/asm-util/9.3/asm-util-9.3.jar;.\\libraries/org/ow2/asm/asm-analysis/9.3/asm-analysis-9.3.jar;.\\libraries/org/ow2/asm/asm-tree/9.3/asm-tree-9.3.jar;.\\libraries/org/ow2/asm/asm/9.3/asm-9.3.jar;.\\libraries/net/minecraftforge/JarJarFileSystems/0.3.16/JarJarFileSystems-0.3.16.jar --add-modules ALL-MODULE-PATH --add-opens java.base/java.util.jar=cpw.mods.securejarhandler --add-opens java.base/java.lang.invoke=cpw.mods.securejarhandler --add-exports java.base/sun.security.util=cpw.mods.securejarhandler --add-exports jdk.naming.dns/com.sun.jndi.dns=java.naming cpw.mods.bootstraplauncher.BootstrapLauncher --username {nickname} --version 1.19.2 --gameDir "." --assetsDir ".\\assets" --assetIndex 1.19 --uuid {uuid} --accessToken {accessToken} --clientId {clientId} --userType mojang --versionType release "--width" 854 "--height" 480 --launchTarget forgeclient --fml.forgeVersion 43.2.0 --fml.mcVersion 1.19.2 --fml.forgeGroup net.minecraftforge --fml.mcpVersion 20220805.130853''')


def skin(window, accessToken):
    window.withdraw()
    gui2.go(accessToken, window)


class go:
    def __init__(self, accessToken, clientId, uuid, nickname):
        window = Tk()
        window.title("EventMod")
        window.iconbitmap(r".\res\icon.ico")
        from tkextrafont import Font
        Font(file=r".\res\Jura.ttf", family="Regular")
        WIDTH = 1280
        HEIGHT = 720
        x = int((window.winfo_screenwidth() / 2) - (WIDTH / 2))
        y = int((window.winfo_screenheight() / 2) - (HEIGHT / 2))
        window.geometry(f'{WIDTH}x{HEIGHT}+{x}+{y}')
        window.configure(bg = "#BAB8FF")

        bgcol = "#BAB8FF"

        canvas = Canvas(
            window,
            bg="#BAB8FF",
            height=720,
            width=1280,
            bd=0,
            highlightthickness=0,
            relief="ridge"
        )

        canvas.place(x=0, y=0)
        canvas.create_text(
            381.820068359375,
            230.51998901367188,
            anchor="nw",
            text="EVENTMOD",
            fill="#747480",
            font=("Jura Regular", 110 * -1)
        )

        button_image_1 = PhotoImage(
            file=relative_to_assets("button_1.png"))
        button_1 = Button(
            activebackground=bgcol,
            bg=bgcol,
            image=button_image_1,
            borderwidth=0,
            highlightthickness=0,
            command=lambda: run(window, accessToken, clientId, uuid, nickname),
            relief="flat"
        )
        button_1.place(
            x=437.98046875,
            y=350.6400146484375,
            width=405.60009765625,
            height=54.5999755859375
        )

        button_image_2 = PhotoImage(
            file=relative_to_assets("button_2.png"))
        button_2 = Button(
            activebackground=bgcol,
            bg=bgcol,
            image=button_image_2,
            borderwidth=0,
            highlightthickness=0,
            command=lambda: skin(window, accessToken),
            relief="flat"
        )
        button_2.place(
            x=437.98046875,
            y=434.8800048828125,
            width=179.400146484375,
            height=54.5999755859375
        )

        button_image_3 = PhotoImage(
            file=relative_to_assets("button_3.png"))
        button_3 = Button(
            activebackground=bgcol,
            bg=bgcol,
            image=button_image_3,
            borderwidth=0,
            highlightthickness=0,
            command=lambda: window.destroy(),
            relief="flat"
        )
        button_3.place(
            x=664.1800537109375,
            y=434.8800048828125,
            width=179.400146484375,
            height=54.5999755859375
        )
        window.resizable(False, False)
        window.mainloop()
